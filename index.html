<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>OpalForge</title>
  <meta name="description" content="OpalForge - Unbreakable Luxury Authentication">
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
  <style>
    *, *::before, *::after { box-sizing: border-box; }
    :root{--snow:#f9f9f9;--navy:#000040;--gold:#B8860B;--silver:#C0C0C0;}
    html,body{height:100%;margin:0;padding:0;overflow-x:hidden;overflow-y:auto;}
    body{min-height:100vh;display:flex;align-items:center;justify-content:center;font-family:Poppins,system-ui,sans-serif;color:var(--navy);
         background:linear-gradient(180deg,var(--snow) 60%,var(--navy) 40%);background-size:200% 200%;animation:g 20s ease infinite;position:relative;}
    @keyframes g{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    .logo-intro{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:3rem;font-weight:700;
                background:linear-gradient(90deg,var(--silver),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent;
                opacity:0;animation:fi 2.2s ease forwards,fo 2s ease 3.6s forwards;z-index:20;}
    @keyframes fi{from{opacity:0;transform:translate(-50%,-62%)}to{opacity:1;transform:translate(-50%,-50%)}}
    @keyframes fo{to{opacity:0;visibility:hidden}}
    .glow{position:absolute;width:520px;height:520px;border-radius:50%;filter:blur(120px);
          background:radial-gradient(circle,rgba(184,134,11,0.4),transparent 60%);left:10%;top:10%;transform:translate(-10%,-10%);
          animation:p 8s infinite alternate;z-index:1;}
    @keyframes p{0%{transform:scale(.95);opacity:.6}100%{transform:scale(1.45);opacity:.9}}
    .container{position:relative;z-index:10;max-width:720px;width:90%;padding:3rem;border-radius:20px;
               background:rgba(255,255,255,.86);backdrop-filter:blur(18px);border:1px solid rgba(192,192,192,.35);
               box-shadow:0 10px 40px rgba(11,26,75,.06);text-align:center;opacity:0;transform:translateY(24px);
               animation:fc .9s ease 3.8s forwards;}
    @keyframes fc{to{opacity:1;transform:none}}
    h1{font-size:2.6rem;margin:0 0 .25rem;font-weight:800;background:linear-gradient(90deg,var(--silver),var(--gold));
       -webkit-background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:.6px;}
    p{margin:.25rem 0 1.75rem;color:#1f2a4d;font-size:1.05rem;}
    #upload{appearance:none;padding:12px 28px;border-radius:999px;border:none;
            background:linear-gradient(90deg,var(--gold),var(--silver));color:var(--navy);font-weight:600;
            cursor:pointer;box-shadow:0 8px 28px rgba(184,134,11,.12);transition:transform .22s,box-shadow .22s;}
    #upload:hover{transform:translateY(-3px);box-shadow:0 18px 40px rgba(184,134,11,.16);}
    #output{margin-top:1.75rem;font-size:1.15rem;font-weight:700;color:var(--navy);line-height:1.5;}
    #loader{margin-top:.6rem;color:var(--gold);display:none;font-weight:600;}
    .preview{margin-top:1rem;border-radius:12px;overflow:hidden;width:240px;height:160px;display:inline-block;
             box-shadow:0 6px 18px rgba(11,26,75,.06);}
    footer{position:absolute;bottom:18px;left:50%;transform:translateX(-50%);font-size:.9rem;color:#fff;text-shadow:0 1px 3px rgba(0,0,0,.3);}
    .sr-only{position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0);}
  </style>
</head>
<body>
  <div class="logo-intro">OpalForge</div>
  <div class="glow"></div>
  <main class="container">
    <h1>OpalForge</h1>
    <p>Forged in Fire. Proven in Truth.</p>
    <button id="upload">Upload Image</button>
    <input id="fileInput" type="file" accept="image/*" class="sr-only">
    <div class="preview" id="imgPreview" hidden></div>
    <div id="output" aria-live="polite">Initializingâ€¦</div>
    <div id="loader">Please waitâ€¦</div>
  </main>
  <footer>Â© 2025 OpalForge â€” Precision Authenticated.</footer>

  <script>
    const output = document.getElementById('output');
    const loader = document.getElementById('loader');
    const upload = document.getElementById('upload');
    const fileInput = document.getElementById('fileInput');
    const preview = document.getElementById('imgPreview');
    let model = null;

    async function loadModel() {
      loader.style.display = 'block';
      output.textContent = 'Activating OpalForge v1...';

      // Unbreakable raw GitHub URL â€” circumvents all deployment limitations
      const modelUrl = 'https://raw.githubusercontent.com/Fennyx/opalforge-ai/main/model/model.json';

      try {
        model = await tf.loadLayersModel(modelUrl);
        loader.style.display = 'none';
        output.textContent = 'OpalForge v1 Active â€” Upload to authenticate.';
      } catch (err) {
        console.error('Model load failed:', err);
        loader.style.display = 'none';
        output.textContent = 'Activation fault. Verify raw GitHub access.';
      }
    }

    async function predict(img) {
      const tensor = tf.browser.fromPixels(img).resizeBilinear([224, 224]).toFloat().div(255).expandDims();
      const prediction = await model.predict(tensor).data();
      tf.dispose(tensor);

      const authentic = (prediction[0] * 100).toFixed(2);
      const replica = (prediction[1] * 100).toFixed(2);
      const verdict = authentic > replica ? 'AUTHENTIC' : 'REPLICA';
      const confidence = Math.max(authentic, replica);

      output.innerHTML = `
        <strong>Verdict: ${verdict}</strong><br>
        Confidence: ${confidence}% ${verdict === 'AUTHENTIC' ? 'âœ…' : 'ðŸ›‘'}
      `;
      loader.style.display = 'none';
    }

    upload.onclick = () => fileInput.click();
    fileInput.onchange = e => {
      const file = e.target.files[0];
      if (!file || !model) return;

      loader.style.display = 'block';
      output.textContent = 'Analyzing...';

      const url = URL.createObjectURL(file);
      preview.innerHTML = `<img src="${url}" style="width:100%;height:100%;object-fit:cover;">`;
      preview.hidden = false;

      const img = new Image();
      img.src = url;
      img.onload = () => predict(img);
    };

    window.onload = loadModel;
  </script>
</body>
</html>
